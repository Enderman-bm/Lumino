<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:Lumino.ViewModels.Settings"
             xmlns:models="using:Lumino.Models.Settings"
             xmlns:converters="using:Lumino.Views.Converters"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="Lumino.Views.Settings.GraphicsSettingsView"
             x:DataType="vm:GraphicsSettingsViewModel">
    
    <UserControl.Resources>
        <converters:ObjectEqualsConverter x:Key="ObjectEqualsConverter"/>
    </UserControl.Resources>
    
    <ScrollViewer>
        <StackPanel Spacing="20" Margin="20">
            <TextBlock Text="å›¾å½¢è®¾ç½®" FontSize="24" FontWeight="Bold" Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"/>
            
            <!-- åŸºæœ¬ä¿¡æ¯ -->
            <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}" 
                    BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}" 
                    BorderThickness="1" CornerRadius="4" Padding="15">
                <StackPanel Spacing="10">
                    <TextBlock Text="åŸºæœ¬ä¿¡æ¯" FontSize="18" FontWeight="SemiBold"/>
                    
                    <Grid ColumnDefinitions="Auto, *" RowDefinitions="Auto, Auto, Auto">
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="æ¸²æŸ“æ¨¡å¼ï¼š" FontWeight="Bold" Margin="0,0,10,5"/>
                        <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding RenderMode}" Margin="0,0,0,5"/>
                        
                        <TextBlock Grid.Row="1" Grid.Column="0" Text="GPU åž‹å·ï¼š" FontWeight="Bold" Margin="0,0,10,5"/>
                        <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding GpuName}" Margin="0,0,0,5"/>
                        
                        <TextBlock Grid.Row="2" Grid.Column="0" Text="GPU åˆ©ç”¨çŽ‡ï¼š" FontWeight="Bold" Margin="0,0,10,5"/>
                        <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding GpuUsage}"/>
                    </Grid>
                </StackPanel>
            </Border>
            
            <!-- æ¸²æŸ“æ¨¡å¼åˆ‡æ¢ -->
            <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}" 
                    BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}" 
                    BorderThickness="1" CornerRadius="4" Padding="15">
                <StackPanel Spacing="15">
                    <TextBlock Text="æ¸²æŸ“æ¨¡å¼åˆ‡æ¢" FontSize="18" FontWeight="SemiBold"/>
                    <TextBlock Text="é€‰æ‹©åº”ç”¨ç¨‹åºçš„æ¸²æŸ“æ–¹å¼ã€‚ç¡¬ä»¶åŠ é€Ÿä½¿ç”¨ GPU æ¸²æŸ“ï¼Œæ€§èƒ½æ›´å¥½ï¼›è½¯ä»¶æ¸²æŸ“ä½¿ç”¨ CPUï¼Œå…¼å®¹æ€§æ›´å¥½ã€‚" 
                               TextWrapping="Wrap" Opacity="0.7" FontSize="12"/>
                    
                    <StackPanel Spacing="10" Margin="0,10,0,0">
                        <!-- ç¡¬ä»¶åŠ é€Ÿé€‰é¡¹ -->
                        <RadioButton GroupName="RenderingMode"
                                     IsChecked="{Binding SelectedRenderingMode, Converter={StaticResource ObjectEqualsConverter}, ConverterParameter={x:Static models:RenderingModeType.Hardware}}"
                                     Command="{Binding SwitchToHardwareRenderingCommand}">
                            <StackPanel Spacing="2">
                                <TextBlock Text="ðŸš€ ç¡¬ä»¶åŠ é€Ÿ (GPU)" FontWeight="Medium"/>
                                <TextBlock Text="ä½¿ç”¨æ˜¾å¡è¿›è¡Œå›¾å½¢æ¸²æŸ“ï¼Œæ€§èƒ½æœ€ä½³ï¼ŒæŽ¨èä½¿ç”¨" FontSize="12" Opacity="0.7"/>
                            </StackPanel>
                        </RadioButton>
                        
                        <!-- è½¯ä»¶æ¸²æŸ“é€‰é¡¹ -->
                        <RadioButton GroupName="RenderingMode"
                                     IsChecked="{Binding SelectedRenderingMode, Converter={StaticResource ObjectEqualsConverter}, ConverterParameter={x:Static models:RenderingModeType.Software}}"
                                     Command="{Binding SwitchToSoftwareRenderingCommand}">
                            <StackPanel Spacing="2">
                                <TextBlock Text="ðŸ’» è½¯ä»¶æ¸²æŸ“ (CPU)" FontWeight="Medium"/>
                                <TextBlock Text="ä½¿ç”¨ CPU è¿›è¡Œå›¾å½¢æ¸²æŸ“ï¼Œå…¼å®¹æ€§æ›´å¥½ï¼Œé€‚ç”¨äºŽæ˜¾å¡é©±åŠ¨æœ‰é—®é¢˜çš„æƒ…å†µ" FontSize="12" Opacity="0.7"/>
                            </StackPanel>
                        </RadioButton>
                    </StackPanel>
                    
                    <!-- çŠ¶æ€æç¤º -->
                    <Border Background="#FFF3E5F5"
                            BorderBrush="#FF9C27B0"
                            BorderThickness="1"
                            CornerRadius="4"
                            Padding="12"
                            Margin="0,10,0,0"
                            IsVisible="{Binding IsRenderingModeChangePending}">
                        <TextBlock Text="{Binding RenderingModeStatus}" 
                                   FontWeight="Medium" 
                                   Foreground="#FF7B1FA2"/>
                    </Border>
                    
                    <TextBlock Text="{Binding RenderingModeStatus}" 
                               Opacity="0.8"
                               IsVisible="{Binding !IsRenderingModeChangePending}"/>
                </StackPanel>
            </Border>
            
            <!-- Vulkan è¯¦ç»†ä¿¡æ¯ -->
            <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}" 
                    BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}" 
                    BorderThickness="1" CornerRadius="4" Padding="15"
                    IsVisible="{Binding IsVulkan}">
                <StackPanel Spacing="10">
                    <TextBlock Text="Vulkan è¯¦ç»†ä¿¡æ¯" FontSize="18" FontWeight="SemiBold"/>
                    
                    <Grid ColumnDefinitions="Auto, *" RowDefinitions="Auto, Auto">
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="API ç‰ˆæœ¬ï¼š" FontWeight="Bold" Margin="0,0,10,5"/>
                        <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding VulkanApiVersion}" Margin="0,0,0,5"/>
                        
                        <TextBlock Grid.Row="1" Grid.Column="0" Text="é©±åŠ¨ç‰ˆæœ¬ï¼š" FontWeight="Bold" Margin="0,0,10,5"/>
                        <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding VulkanDriverVersion}" Margin="0,0,0,5"/>
                    </Grid>
                    
                    <Separator Margin="0,10"/>
                    
                    <ItemsControl ItemsSource="{Binding VulkanDetails}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Grid ColumnDefinitions="200, *" Margin="0,2">
                                    <TextBlock Grid.Column="0" Text="{Binding Key}" FontWeight="Bold"/>
                                    <TextBlock Grid.Column="1" Text="{Binding Value}" TextWrapping="Wrap"/>
                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Border>
            
            <TextBlock Text="æ³¨æ„ï¼šGPU åˆ©ç”¨çŽ‡ä»…åœ¨ Windows å¹³å°ä¸Šå¯ç”¨ï¼Œä¸”å¯èƒ½éœ€è¦ç®¡ç†å‘˜æƒé™æˆ–ç‰¹å®šé©±åŠ¨æ”¯æŒã€‚æ¸²æŸ“æ¨¡å¼æ›´æ”¹éœ€è¦é‡å¯åº”ç”¨ç¨‹åºæ‰èƒ½ç”Ÿæ•ˆã€‚" 
                       FontSize="12" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" 
                       TextWrapping="Wrap"/>
        </StackPanel>
    </ScrollViewer>
</UserControl>